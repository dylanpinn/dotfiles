#!/bin/bash

# Format SH and BASH script files. These must have a correct shebang containing
# either bash or sh.
# The formatting is done with shfmt and matches the Google Style Guide.

file_pattern=$1

# Match files with sh in shebang but not files with zsh.
# TODO: Replace this with a single regex.
res=$(rg -l '^#!/.*sh' "$file_pattern" | xargs rg --files-without-match '^#!/.*zsh')

if [ "$res" ]; then
  shfmt -i 2 -ci -w "$res"
fi
